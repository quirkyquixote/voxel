
#include "vertex_buffer.h"

#include <assert.h>
#include <stdlib.h>

#include "types.h"

#define T_COL 1.
#define X_COL .8
#define Z_COL .6
#define B_COL .4

#define TC(a,b) { a / 32., b / 32. }

const struct v2f texcoord_from_mat[256][3] = {
	[MAT_DIRT] = { TC(1, 0), TC(1, 0), TC(1, 0) },
	[MAT_GRASS] = { TC(2, 0), TC(2, 0), TC(2, 0) },
	[MAT_LIMESTONE] = { TC(0, 1), TC(0, 1), TC(0, 1) },
	[MAT_LIMESTONE_COBBLE] = { TC(1, 1), TC(1, 1), TC(1, 1) },
	[MAT_LIMESTONE_LBRICK] = { TC(6, 1), TC(7, 1), TC(8, 1) },
	[MAT_LIMESTONE_SBRICK] = { TC(3, 1), TC(4, 1), TC(5, 1) },
	[MAT_LIMESTONE_TILE] = { TC(2, 1), TC(2, 1), TC(2, 1) },
	[MAT_LIMESTONE_COLUMN] = { TC(9, 1), TC(10, 1), TC(10, 1) },
	[MAT_LIMESTONE_BLOCK] = { TC(7, 1), TC(7, 1), TC(7, 1) },
	[MAT_SANDSTONE] = { TC(0, 2), TC(0, 2), TC(0, 2) },
	[MAT_SANDSTONE_COBBLE] = { TC(1, 2), TC(1, 2), TC(1, 2) },
	[MAT_SANDSTONE_LBRICK] = { TC(6, 2), TC(7, 2), TC(8, 2) },
	[MAT_SANDSTONE_SBRICK] = { TC(3, 2), TC(4, 2), TC(5, 2) },
	[MAT_SANDSTONE_TILE] = { TC(2, 2), TC(2, 2), TC(2, 2) },
	[MAT_SANDSTONE_COLUMN] = { TC(9, 2), TC(10, 2), TC(10, 2) },
	[MAT_SANDSTONE_BLOCK] = { TC(7, 2), TC(7, 2), TC(7, 2) },
	[MAT_MARBLE] = { TC(0, 3), TC(0, 3), TC(0, 3) },
	[MAT_MARBLE_COBBLE] = { TC(1, 3), TC(1, 3), TC(1, 3) },
	[MAT_MARBLE_LBRICK] = { TC(6, 3), TC(7, 3), TC(8, 3) },
	[MAT_MARBLE_SBRICK] = { TC(3, 3), TC(4, 3), TC(5, 3) },
	[MAT_MARBLE_TILE] = { TC(2, 3), TC(2, 3), TC(2, 3) },
	[MAT_MARBLE_COLUMN] = { TC(9, 3), TC(10, 3), TC(10, 3) },
	[MAT_MARBLE_BLOCK] = { TC(7, 3), TC(7, 3), TC(7, 3) },
	[MAT_GRANITE] = { TC(0, 4), TC(0, 4), TC(0, 4) },
	[MAT_GRANITE_COBBLE] = { TC(1, 4), TC(1, 4), TC(1, 4) },
	[MAT_GRANITE_LBRICK] = { TC(6, 4), TC(7, 4), TC(8, 4) },
	[MAT_GRANITE_SBRICK] = { TC(3, 4), TC(4, 4), TC(5, 4) },
	[MAT_GRANITE_TILE] = { TC(2, 4), TC(2, 4), TC(2, 4) },
	[MAT_GRANITE_COLUMN] = { TC(9, 4), TC(10, 4), TC(10, 4) },
	[MAT_GRANITE_BLOCK] = { TC(7, 4), TC(7, 4), TC(7, 4) },
	[MAT_BASALT] = { TC(0, 5), TC(0, 5), TC(0, 5) },
	[MAT_BASALT_COBBLE] = { TC(1, 5), TC(1, 5), TC(1, 5) },
	[MAT_BASALT_LBRICK] = { TC(6, 5), TC(7, 5), TC(8, 5) },
	[MAT_BASALT_SBRICK] = { TC(3, 5), TC(4, 5), TC(5, 5) },
	[MAT_BASALT_TILE] = { TC(2, 5), TC(2, 5), TC(2, 5) },
	[MAT_BASALT_COLUMN] = { TC(9, 5), TC(10, 5), TC(10, 5) },
	[MAT_BASALT_BLOCK] = { TC(7, 5), TC(7, 5), TC(7, 5) },
	[MAT_SLATE] = { TC(0, 6), TC(0, 6), TC(0, 6) },
	[MAT_SLATE_COBBLE] = { TC(1, 6), TC(1, 6), TC(1, 6) },
	[MAT_SLATE_LBRICK] = { TC(6, 6), TC(7, 6), TC(8, 6) },
	[MAT_SLATE_SBRICK] = { TC(3, 6), TC(4, 6), TC(5, 6) },
	[MAT_SLATE_TILE] = { TC(2, 6), TC(2, 6), TC(2, 6) },
	[MAT_SLATE_COLUMN] = { TC(9, 6), TC(10, 6), TC(10, 6) },
	[MAT_SLATE_BLOCK] = { TC(7, 6), TC(7, 6), TC(7, 6) },
	[MAT_CLAY] = { TC(0, 7), TC(0, 7), TC(0, 7) },
	[MAT_CLAY_COBBLE] = { TC(1, 7), TC(1, 7), TC(1, 7) },
	[MAT_CLAY_LBRICK] = { TC(6, 7), TC(7, 7), TC(8, 7) },
	[MAT_CLAY_SBRICK] = { TC(3, 7), TC(4, 7), TC(5, 7) },
	[MAT_CLAY_TILE] = { TC(2, 7), TC(2, 7), TC(2, 7) },
	[MAT_CLAY_COLUMN] = { TC(9, 7), TC(10, 7), TC(10, 7) },
	[MAT_CLAY_BLOCK] = { TC(7, 7), TC(7, 7), TC(7, 7) },
	[MAT_WOOD1] = { TC(1, 8), TC(1, 8), TC(1, 8) },
	[MAT_WOOD1_CRATE] = { TC(2, 8), TC(3, 8), TC(0, 8) },
	[MAT_WOOD1_WORKBENCH] = { TC(4, 8), TC(5, 8), TC(0, 8) },
	[MAT_WOOD1_PIPE] = { TC(6, 8), TC(7, 8), TC(7, 8) },
	[MAT_WOOD2] = { TC(1, 9), TC(1, 9), TC(1, 9) },
	[MAT_WOOD2_CRATE] = { TC(2, 9), TC(3, 9), TC(0, 9) },
	[MAT_WOOD2_WORKBENCH] = { TC(4, 9), TC(5, 9), TC(0, 9) },
	[MAT_WOOD2_PIPE] = { TC(6, 9), TC(7, 9), TC(7, 9) },
	[MAT_WOOD3] = { TC(1, 10), TC(1, 10), TC(1, 10) },
	[MAT_WOOD3_CRATE] = { TC(2, 10), TC(3, 10), TC(0, 10) },
	[MAT_WOOD3_WORKBENCH] = { TC(4, 10), TC(5, 10), TC(0, 10) },
	[MAT_WOOD3_PIPE] = { TC(6, 10), TC(7, 10), TC(7, 10) },
	[MAT_WOOD4] = { TC(1, 11), TC(1, 11), TC(1, 11) },
	[MAT_WOOD4_CRATE] = { TC(2, 11), TC(3, 11), TC(0, 11) },
	[MAT_WOOD4_WORKBENCH] = { TC(4, 11), TC(5, 11), TC(0, 11) },
	[MAT_WOOD4_PIPE] = { TC(6, 11), TC(7, 11), TC(7, 11) },
	[MAT_WOOD5] = { TC(1, 12), TC(1, 12), TC(1, 12) },
	[MAT_WOOD5_CRATE] = { TC(2, 12), TC(3, 12), TC(0, 12) },
	[MAT_WOOD5_WORKBENCH] = { TC(4, 12), TC(5, 12), TC(0, 12) },
	[MAT_WOOD5_PIPE] = { TC(6, 12), TC(7, 12), TC(7, 12) },
	[MAT_WOOD6] = { TC(1, 13), TC(1, 13), TC(1, 13) },
	[MAT_WOOD6_CRATE] = { TC(2, 13), TC(3, 13), TC(0, 13) },
	[MAT_WOOD6_WORKBENCH] = { TC(4, 13), TC(5, 13), TC(0, 13) },
	[MAT_WOOD6_PIPE] = { TC(6, 13), TC(7, 13), TC(7, 13) },
	[MAT_WOOD7] = { TC(1, 14), TC(1, 14), TC(1, 14) },
	[MAT_WOOD7_CRATE] = { TC(2, 14), TC(3, 14), TC(0, 14) },
	[MAT_WOOD7_WORKBENCH] = { TC(4, 14), TC(5, 14), TC(0, 14) },
	[MAT_WOOD7_PIPE] = { TC(6, 14), TC(7, 14), TC(7, 14) },
};

struct vertex_desc vertices_face_dn[] = {
	{ 0., 0., 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 1., 0., B_COL, B_COL, B_COL, 2 },
};

struct vertex_desc vertices_face_up[] = {
	{ 1., 0., 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., 0., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 0., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
};

struct vertex_desc vertices_face_lf[] = {
	{ 0., 0., 0., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 1., 0., X_COL, X_COL, X_COL },
};

struct vertex_desc vertices_face_rt[] = {
	{ 0., 0., 1., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 1., 0., X_COL, X_COL, X_COL },
};

struct vertex_desc vertices_face_bk[] = {
	{ 1., 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_face_ft[] = {
	{ 0., 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_slab_dn[] = {
	{ 1., .5, 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 0., 0., .5, X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 1., 1., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_slab_up[] = {
	{ 0., .5, 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, 1., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 0., 0., 1., X_COL, X_COL, X_COL },
	{ 0., .5, 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., .5, X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 1., X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 1., .5, Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_slab_lf[] = {
	{ 0., 0., 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 1., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ .5, 1., 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ .5, 0., 1., 0., 1., X_COL, X_COL, X_COL },
	{ .5, 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ .5, 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ .5, 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 0., 1., 0., X_COL, X_COL, X_COL },
	{ .5, 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 1., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 1., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_slab_rt[] = {
	{ .5, 0., 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 1., 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ .5, 0., 0., 0., 1., X_COL, X_COL, X_COL },
	{ .5, 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ .5, 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ .5, 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 1., 1., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 0., 1., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_slab_bk[] = {
	{ 0., 0., 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .5, 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .5, 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .5, 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 1., .5, 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 0., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., .5, 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., .5, 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., .5, 1., 0., X_COL, X_COL, X_COL },
	{ 1., 0., .5, 0., 1., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., .5, 0., 0., X_COL, X_COL, X_COL },
	{ 1., 1., .5, 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 1., 0., X_COL, X_COL, X_COL },
	{ 0., 0., .5, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .5, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .5, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_slab_ft[] = {
	{ 0., 0., .5, 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .5, 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .5, 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 1., 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., .5, 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., .5, 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., .5, 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., .5, 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., .5, 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 1., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 1., 0., 1., X_COL, X_COL, X_COL },
	{ 1., 0., .5, 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., .5, 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., .5, 1., 0., X_COL, X_COL, X_COL },
	{ 1., 0., .5, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .5, 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_stairs_dl[] = {
	{ 1., .5, 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, .5, 1., 0., .5, T_COL, T_COL, T_COL, 1 },
	{ .5, .5, 1., 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, .5, 0., 1., .5, T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 1., 0., .5, T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., 0., X_COL, X_COL, X_COL },
	{ .5, .5, 1., 0., 1., X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 0., .5, 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ .5, 1., 1., .5, 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_stairs_dr[] = {
	{ 0., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, .5, 1., 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .5, .5, 1., 0., .5, T_COL, T_COL, T_COL, 1 },
	{ .5, .5, 0., 1., .5, T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., .5, T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 1., 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ .5, 1., 0., 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, 0., 1., 0., X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, .5, 1., 0., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ .5, 1., 0., .5, 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 1., 1., .5, 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_stairs_db[] = {
	{ 0., .5, 1., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, .5, 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 1., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, .5, 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., .5, .5, 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., .5, 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 0., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 0., 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 1., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .5, .5, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., .5, 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., .5, 1., 1., .5, X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., 1., .5, .5, 0., X_COL, X_COL, X_COL },
	{ 1., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 0., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., .5, 1., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 1., .5, .5, 0., X_COL, X_COL, X_COL },
};

struct vertex_desc vertices_stairs_df[] = {
	{ 1., .5, 0., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .5, .5, 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., .5, .5, 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., .5, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .5, .5, 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., .5, 0., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .5, 1., .5, T_COL, T_COL, T_COL, 1 },
	{ 0., 1., 1., 1., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 0., 0., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .5, .5, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 1., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .5, 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., .5, 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., .5, .5, 0., X_COL, X_COL, X_COL },
	{ 1., 0., 1., 0., 1., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., 1., .5, .5, 0., X_COL, X_COL, X_COL },
};

struct vertex_desc vertices_stairs_ul[] = {
	{ 1., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, 1., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, .5, 1., 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, .5, 1., 0., .5, B_COL, B_COL, B_COL, 2 },
	{ .5, .5, 0., 1., .5, B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 0., 1., .5, B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 1., 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 0., 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 0., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., 0., X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, .5, 1., 0., 1., X_COL, X_COL, X_COL },
	{ .5, 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ .5, 0., 0., .5, 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 1., .5, 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_stairs_ur[] = {
	{ 0., .5, 1., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, .5, 1., 0., .5, B_COL, B_COL, B_COL, 2 },
	{ .5, .5, 1., 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .5, .5, 0., 1., .5, B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 1., 0., .5, B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 0., 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ .5, 0., 0., 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 1., 1., 0., .5, X_COL, X_COL, X_COL },
	{ 0., 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, 0., 1., 0., X_COL, X_COL, X_COL },
	{ .5, .5, 1., 0., 1., X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, 0., 1., 0., .5, X_COL, X_COL, X_COL },
	{ .5, .5, 0., 1., 1., X_COL, X_COL, X_COL },
	{ .5, 0., 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., 1., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ .5, .5, 0., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 1., 0., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, 0., 0., .5, 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 0., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .5, .5, 1., .5, .5, Z_COL, Z_COL, Z_COL },
	{ .5, 0., 1., .5, 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_stairs_ub[] = {
	{ 1., .5, 1., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 1., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, .5, 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., .5, .5, 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 1., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., .5, .5, 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .5, 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .5, 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 0., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .5, 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 0., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 1., 1., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .5, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, 1., 1., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .5, .5, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 0., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., .5, 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., .5, 1., 1., .5, X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., 0., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., .5, .5, 0., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 0., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 0., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., 1., 1., 1., 1., X_COL, X_COL, X_COL },
	{ 1., .5, 1., 1., .5, X_COL, X_COL, X_COL },
	{ 1., 0., 0., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., 0., .5, .5, 0., X_COL, X_COL, X_COL },
};

struct vertex_desc vertices_stairs_uf[] = {
	{ 0., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, .5, 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., .5, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .5, .5, 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., .5, .5, 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .5, 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .5, 0., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .5, 1., .5, B_COL, B_COL, B_COL, 2 },
	{ 1., 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., 1., 1., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 1., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., 1., 0., 0., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., 0., 1., .5, Z_COL, Z_COL, Z_COL },
	{ 1., .5, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .5, 0., 1., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .5, .5, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., .5, .5, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .5, 0., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 0., .5, 1., .5, Z_COL, Z_COL, Z_COL },
	{ 0., 1., 1., 0., 1., X_COL, X_COL, X_COL },
	{ 0., 1., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 0., 0., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., 1., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 0., .5, 0., 1., .5, X_COL, X_COL, X_COL },
	{ 0., 0., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 0., 0., .5, .5, 0., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., 1., 0., 1., X_COL, X_COL, X_COL },
	{ 1., 0., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 1., 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., .5, 0., 1., .5, X_COL, X_COL, X_COL },
	{ 1., .5, .5, .5, .5, X_COL, X_COL, X_COL },
	{ 1., 0., 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., .5, .5, 0., X_COL, X_COL, X_COL },
};

struct vertex_desc vertices_pane_x[] = {
	{ .46875, 0., 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ .53125, 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .46875, 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ .46875, 0., 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ .53125, 0., 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ .53125, 0., 1., 1., 0., B_COL, B_COL, B_COL, 2 },

	{ .53125, 1., 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ .53125, 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .46875, 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ .46875, 1., 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ .53125, 1., 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ .46875, 1., 0., 1., 0., T_COL, T_COL, T_COL, 1 },

	{ .46875, 0., 0., 0., 1., X_COL, X_COL, X_COL },
	{ .46875, 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ .46875, 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ .46875, 1., 0., 0., 0., X_COL, X_COL, X_COL },
	{ .46875, 0., 1., 1., 1., X_COL, X_COL, X_COL },
	{ .46875, 1., 1., 1., 0., X_COL, X_COL, X_COL },

	{ .53125, 0., 1., 0., 1., X_COL, X_COL, X_COL },
	{ .53125, 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ .53125, 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ .53125, 1., 1., 0., 0., X_COL, X_COL, X_COL },
	{ .53125, 0., 0., 1., 1., X_COL, X_COL, X_COL },
	{ .53125, 1., 0., 1., 0., X_COL, X_COL, X_COL },

	{ .53125, 0., 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ .46875, 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .53125, 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .53125, 1., 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .46875, 0., 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .46875, 1., 0., 1., 0., Z_COL, Z_COL, Z_COL },

	{ .46875, 0., 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ .53125, 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .46875, 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .46875, 1., 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ .53125, 0., 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ .53125, 1., 1., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_pane_y[] = {
	{ 0., .46875, 0., 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .46875, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., .46875, 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., .46875, 1., 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., .46875, 0., 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., .46875, 1., 1., 0., B_COL, B_COL, B_COL, 2 },

	{ 1., .53125, 1., 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., .53125, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .53125, 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., .53125, 1., 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., .53125, 0., 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., .53125, 0., 1., 0., T_COL, T_COL, T_COL, 1 },

	{ 0., .46875, 0., 0., 1., X_COL, X_COL, X_COL },
	{ 0., .46875, 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., .53125, 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .53125, 0., 0., 0., X_COL, X_COL, X_COL },
	{ 0., .46875, 1., 1., 1., X_COL, X_COL, X_COL },
	{ 0., .53125, 1., 1., 0., X_COL, X_COL, X_COL },

	{ 1., .46875, 1., 0., 1., X_COL, X_COL, X_COL },
	{ 1., .46875, 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., .53125, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .53125, 1., 0., 0., X_COL, X_COL, X_COL },
	{ 1., .46875, 0., 1., 1., X_COL, X_COL, X_COL },
	{ 1., .53125, 0., 1., 0., X_COL, X_COL, X_COL },

	{ 1., .46875, 0., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .46875, 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .53125, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .53125, 0., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .46875, 0., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .53125, 0., 1., 0., Z_COL, Z_COL, Z_COL },

	{ 0., .46875, 1., 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .46875, 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., .53125, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., .53125, 1., 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., .46875, 1., 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., .53125, 1., 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_desc vertices_pane_z[] = {
	{ 0., 0., .46875, 0., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .46875, 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .53125, 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 0., 0., .53125, 0., 0., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .46875, 1., 1., B_COL, B_COL, B_COL, 2 },
	{ 1., 0., .53125, 1., 0., B_COL, B_COL, B_COL, 2 },

	{ 1., 1., .53125, 0., 1., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., .46875, 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .53125, 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .53125, 0., 0., T_COL, T_COL, T_COL, 1 },
	{ 1., 1., .46875, 1., 1., T_COL, T_COL, T_COL, 1 },
	{ 0., 1., .46875, 1., 0., T_COL, T_COL, T_COL, 1 },

	{ 0., 0., .46875, 0., 1., X_COL, X_COL, X_COL },
	{ 0., 0., .53125, 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., .46875, 0., 0., X_COL, X_COL, X_COL },
	{ 0., 1., .46875, 0., 0., X_COL, X_COL, X_COL },
	{ 0., 0., .53125, 1., 1., X_COL, X_COL, X_COL },
	{ 0., 1., .53125, 1., 0., X_COL, X_COL, X_COL },

	{ 1., 0., .53125, 0., 1., X_COL, X_COL, X_COL },
	{ 1., 0., .46875, 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., .53125, 0., 0., X_COL, X_COL, X_COL },
	{ 1., 1., .53125, 0., 0., X_COL, X_COL, X_COL },
	{ 1., 0., .46875, 1., 1., X_COL, X_COL, X_COL },
	{ 1., 1., .46875, 1., 0., X_COL, X_COL, X_COL },

	{ 1., 0., .46875, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 0., .46875, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .46875, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .46875, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 0., .46875, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .46875, 1., 0., Z_COL, Z_COL, Z_COL },

	{ 0., 0., .53125, 0., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .53125, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .53125, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 0., 1., .53125, 0., 0., Z_COL, Z_COL, Z_COL },
	{ 1., 0., .53125, 1., 1., Z_COL, Z_COL, Z_COL },
	{ 1., 1., .53125, 1., 0., Z_COL, Z_COL, Z_COL },
};

struct vertex_buffer *vertex_buffer(int vbo_count)
{
	struct vertex_buffer *r = calloc(1, sizeof(*r));
	r->vbo_count = vbo_count;
	r->vbo_names = calloc(vbo_count, sizeof(*r->vbo_names));
	r->vbo_sizes = calloc(vbo_count, sizeof(*r->vbo_sizes));
	glGenBuffers(r->vbo_count, r->vbo_names);
	assert(glGetError() == GL_NO_ERROR);
	return r;
}

void vertex_buffer_destroy(struct vertex_buffer *r)
{
	assert(glGetError() == GL_NO_ERROR);
	glDeleteBuffers(r->vbo_count, r->vbo_names);
	free(r->vbo_names);
	free(r->vbo_sizes);
	free(r);
}

void vertex_buffer_enable(struct vertex_buffer *r)
{
	assert(glGetError() == GL_NO_ERROR);
}

void vertex_buffer_draw_slice(struct vertex_buffer *r, GLenum mode, size_t buf,
		size_t first, size_t count)
{
	assert(buf < r->vbo_count);
	assert(first + count <= r->vbo_sizes[buf]);
	glBindBuffer(GL_ARRAY_BUFFER, r->vbo_names[buf]);
	glEnableClientState(GL_VERTEX_ARRAY);
	glEnableClientState(GL_TEXTURE_COORD_ARRAY);
	glEnableClientState(GL_COLOR_ARRAY);
	glVertexPointer(3, GL_FLOAT, sizeof(struct vertex), (char *)0);
	glTexCoordPointer(4, GL_FLOAT, sizeof(struct vertex), (char *)offsetof(struct vertex, u0));
	glColorPointer(4, GL_UNSIGNED_BYTE, sizeof(struct vertex), (char *)offsetof(struct vertex, r));
	glDrawArrays(mode, first, count);
	glDisableClientState(GL_VERTEX_ARRAY);
	glDisableClientState(GL_TEXTURE_COORD_ARRAY);
	glDisableClientState(GL_COLOR_ARRAY);
	assert(glGetError() == GL_NO_ERROR);
}

void vertex_buffer_draw(struct vertex_buffer *r, GLenum mode, size_t buf)
{
	vertex_buffer_draw_slice(r, mode, buf, 0, r->vbo_sizes[buf]);
}

void vertex_buffer_disable(struct vertex_buffer *r)
{
	assert(glGetError() == GL_NO_ERROR);
}

void vertex_buffer_update(struct vertex_buffer *r, size_t buf, const void *data, size_t size)
{
	assert(glGetError() == GL_NO_ERROR);
	assert(buf < r->vbo_count);
	glBindBuffer(GL_ARRAY_BUFFER, r->vbo_names[buf]);
	glBufferData(GL_ARRAY_BUFFER, size * sizeof(struct vertex), data, GL_STATIC_DRAW);
	r->vbo_sizes[buf] = size;
	assert(glGetError() == GL_NO_ERROR);
}


